<!DOCTYPE html>
<html>
<head>
<title>Insert title here</title>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet" />
<link href="http://materializecss.com/dist/css/materialize.min.css"
	type="text/css" rel="stylesheet" media="screen,projection" />
<link
	href="http://materializecss.com/templates/parallax-template/css/style.css"
	type="text/css" rel="stylesheet" media="screen,projection" />
</head>
<body>

	<div th:replace="fragments/header :: header" />
	<div class="container">
		<div class="row">
			<div class="col s4">
				<div class="card">
					<div class="card-image">
						<img src="image" />
					</div>
				</div>
			</div>
			<div class="col s8">
				<div class="card">
					<div class="card-content">
						<span class="card-title">Full name</span> <span
							class="card-subtitle">Full name</span>
						<div class="row">
							<div class="col s10 offset-s1">
								<table>
									<tbody>
										<tr>
											<td>Year of birth</td>
											<td th:text="${user.birthYear}">1800</td>
										</tr>
										<tr>
											<td>Height</td>
											<td>123</td>
										</tr>
										<tr>
											<td>Weight</td>
											<td>76</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
					<div class="card-action">
						<a href="#">This is a link</a> <a href="#">This is a link</a>
					</div>
				</div>
			</div>
		</div>
		<div th:if="${user.role.label == 'Admin'}">
			<a href="#" id="upload_widget_opener" class="btn">Add photoes</a>
			<script src="//widget.cloudinary.com/global/all.js"
				type="text/javascript"></script>
			<script type="text/javascript" th:inline="javascript">
			document.getElementById("upload_widget_opener").addEventListener(
					"click",
					function() {
						cloudinary.openUploadWidget({
							cloud_name : 'portfl',
							upload_preset : 'ecamo2yf'
						}, function(error, result) {
							if (result != undefined) {
								var urls = [];
								for ( var key in result) {
									urls.push(result[key]["url"]);
								}
								var request = new XMLHttpRequest();
								request.open("POST", "/addphotoes", false);
								request.setRequestHeader('Content-Type', 'application/jsonurls');
								request.send(JSON.stringify(urls));
								window.location.href = "/users/" + [[${user.username}]];
							}
						});
					}, false);
		</script>
		</div>


		<div th:each="photo : ${user.photoes}">
			<img th:src="${photo.url}" height="100" />
		</div>

	</div>

	<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<script src="http://materializecss.com/dist/js/materialize.js"></script>
	<script
		src="http://materializecss.com/templates/parallax-template/js/init.js"></script>

</body>
</html>